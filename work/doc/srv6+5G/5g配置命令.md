# rru

##### 2.6G基站：

```
rdmem w 0xa0000034 0x1 0x40
rdmem w 0xa0080034 0x1 0x40
ru_cmd
//---5g_cpri作为参考----------------
fpgawrite 0 0x324  0x0
fpgawrite 0 0x23c 1 
9528write 0x108 0x71
//---------5g-------------------
fpgawrite 1 0x54   0x1
fpgawrite 1 0x1c 0x63576357
fpgawrite 1 0x20 0x0000
fpgawrite 1 0xc4 1
9379RadioOff 1
//9379SetRfFreq 1 3549540
//9379SetRfFreq 1 3506340
9379SetRfFreq 1 2563770
9379RadioOn 1
set9379gain 2 10000
set9379gain 3 10000
fpgawrite 1 0x334 0x20002000
fpgawrite 1 0x280 0x0
txpoweron 2 1 
txpoweron 3 1
fpgawrite 1 0x38 0xf041c
fpgawrite 1 0x3c 0xd040f
fpgawrite 1 0x40 0xc0402
fpgawrite 1 0x44 0xc0402
fpgawrite 1 0x18 0x1
dpdsend 2 1 
dpdsend 3 1
fpgawrite 1 0x58 0xf00 
fpgawrite 1 0xc0 0x38
fpgawrite 1 0x2cc 0x270
fpgawrite 1 0x2d0 0x270
fpgawrite 1 0x2d4 0x270
fpgawrite 1 0x2e0 0x17
fpgawrite 1 0x2f8 0x19a0
fpgawrite 1 0x2c0 0x1b8dd
fpgawrite 1 0x33c 0x1b8d3
fpgawrite 1 0x340 0x270
fpgawrite 1 0x344 0x270
fpgawrite 1 0x348 0x2ed63
fpgawrite 1 0x2d8 0x160
fpgawrite 1 0x58 0xf00
SetAntenna 2 0
SetAntenna 3 0
//-----------8:4:2---------------
fpgawrite 1 0x33c 0x1320a
fpgawrite 1 0x348 0x37430
fpgawrite 1 0x2c0 0x13210
fpgawrite 1 0x2e0 0x1b
fpgawrite 1 0x2f8 0x2800
//-------5ms
fpgawrite 1 0x2e0 0x38
fpgawrite 1 0x2f8 0x2320
fpgawrite 1 0x2c0 0x2447d
fpgawrite 1 0x33c 0x0
fpgawrite 1 0x340 0x0
fpgawrite 1 0x344 0x0
fpgawrite 1 0x348 0x0
fpgawrite 1 0x2d8 0x160
fpgawrite 1 0x280 0x0
```

##### 3.5G基站

```
rdmem w 0xa0000034 0x1 0x40
rdmem w 0xa0080034 0x1 0x40
ru_cmd
//---5g_cpri作为参考----------------
fpgawrite 0 0x324  0x0
fpgawrite 0 0x23c 1 
9528write 0x108 0x71
//---------5g-------------------
fpgawrite 1 0x54   0x1
fpgawrite 1 0x1c 0x63576357
fpgawrite 1 0x20 0x0000
fpgawrite 1 0xc4 1
9379RadioOff 1
9379SetRfFreq 1 3549540
9379RadioOn 1
set9379gain 2 10000
set9379gain 3 10000
fpgawrite 1 0x334 0x20002000
fpgawrite 1 0x280 0x0
txpoweron 2 1 
txpoweron 3 1
fpgawrite 1 0x38 0xf041c
fpgawrite 1 0x3c 0xd040f
fpgawrite 1 0x40 0xc0402
fpgawrite 1 0x44 0xc0402
fpgawrite 1 0x18 0x1
dpdsend 2 1 
dpdsend 3 1
fpgawrite 1 0x58 0xf00 
fpgawrite 1 0xc0 0x38
fpgawrite 1 0x2cc 0x270
fpgawrite 1 0x2d0 0x270
fpgawrite 1 0x2d4 0x270
fpgawrite 1 0x2e0 0x17
fpgawrite 1 0x2f8 0x19a0
fpgawrite 1 0x2c0 0x1b8dd
fpgawrite 1 0x33c 0x1b8d3
fpgawrite 1 0x340 0x270
fpgawrite 1 0x344 0x270
fpgawrite 1 0x348 0x2ed63
fpgawrite 1 0x2d8 0x160
fpgawrite 1 0x58 0xf00
SetAntenna 2 0
SetAntenna 3 0
//-----------8:4:2---------------
fpgawrite 1 0x33c 0x1320a
fpgawrite 1 0x348 0x37430
fpgawrite 1 0x2c0 0x13210
fpgawrite 1 0x2e0 0x1b
fpgawrite 1 0x2f8 0x2800
//-------5ms
fpgawrite 1 0x2e0 0x38
fpgawrite 1 0x2f8 0x2320
fpgawrite 1 0x2c0 0x2447d
fpgawrite 1 0x33c 0x0
fpgawrite 1 0x340 0x0
fpgawrite 1 0x344 0x0
fpgawrite 1 0x348 0x0
fpgawrite 1 0x2d8 0x160
fpgawrite 1 0x280 0x0
```

# 5gc

```
./kernel.sh
systemctl start vpp
cd /root/baicells
./run5gc.sh start
```

# bbu

进入/root/stack_bin/DU/cfg 目录

##### 2.6G基站

```
ln -snf TR196_gNodeB_DU_Data_Model.xml_bak TR196_gNodeB_DU_Data_Model.xml
```

##### 3.5G基站

```
ln -snf TR196_gNodeB_DU_Data_Model.xml_bak_35g TR196_gNodeB_DU_Data_Model.xml
```



在root目录下

```
rec
./build_script install
lspci |grep fec
lspci |grep Xil
ls /dev
cd /root
./ipaddr.sh
cd /root/stack_bin
./5g_app start
```

# 

